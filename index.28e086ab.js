!function(){var e={};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var n=new/*#__PURE__*/(function(){var e;function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.initialState=e,this.currentState=e.map(function(e){return r(e)}),this.tbody=document.querySelector("tbody"),this.score=0}return e=[{key:"nextMovePossible",value:function(){var e=this;return this.currentState.some(function(t,r){return t.some(function(n,o){var i,a,s=t[o+1],c=t[o-1];r<3&&(a=e.currentState[r+1][o]),r>0&&(i=e.currentState[r-1][o]);var u=[a,i,c,s].some(function(e){return 0===e}),l=[a,i,c,s].some(function(e){return e===n});return u||l})})}},{key:"renderHTML",value:function(){var e=this;this.currentState.forEach(function(t,n){r(e.tbody.children[n].children).forEach(function(r,n){0===t[n]?e.clearCell(r):(r.textContent=t[n],r.className="field-cell",r.classList.add("field-cell--".concat(t[n])))})})}},{key:"createNewCell",value:function(){var e,t;if(!this.currentState.every(function(e){return e.every(function(e){return 0!==e})})){do e=Math.floor(4*Math.random()),t=Math.floor(4*Math.random());while(0!==this.currentState[e][t])this.currentState[e][t]=2}}},{key:"clearCell",value:function(e){e.className="field-cell",e.textContent=""}},{key:"move",value:function(e){for(var t="up"===e||"down"===e,r="left"===e||"up"===e?-1:1,n=1===r?3:0,o=function(e){return 1===r?e>=0:e<4},i=!1,a=n;o(a);a-=r)for(var s=n;o(s);s-=r){var c=0,u=a,l=s,f=t?a+(c+1)*r:a,h=t?s:s+(c+1)*r,d=this.currentState[u][l],v=void 0;if(0!==d)for(f>=0&&f<4&&(v=this.currentState[f][h]);0===v||v===d;)if(i=!0,0===v){if(this.currentState[f][h]=d,this.currentState[u][l]=0,c++,u=t?a+c*r:a,l=t?s:s+c*r,f=t?a+(c+1)*r:a,h=t?s:s+(c+1)*r,f>=0&&f<4&&h>=0&&h<4)d=this.currentState[u][l],v=this.currentState[f][h];else break}else{this.currentState[f][h]=2*d,this.currentState[u][l]=0,this.score+=2*d,this.getScore();break}}i&&(this.createNewCell(),this.renderHTML(),this.getStatus())}},{key:"moveLeft",value:function(){this.move("left")}},{key:"moveRight",value:function(){this.move("right")}},{key:"moveUp",value:function(){this.move("up")}},{key:"moveDown",value:function(){this.move("down")}},{key:"getScore",value:function(){return document.querySelector(".game-score").textContent=this.score,this.score}},{key:"getState",value:function(){return this.currentState}},{key:"getStatus",value:function(){return this.currentState.every(function(e){return e.every(function(e){return 0===e})})?"idle":this.currentState.some(function(e){return e.some(function(e){return 2048===e})})?(document.querySelector(".message-win").classList.remove("hidden"),"win"):this.nextMovePossible()?"playing":(document.querySelector(".message-lose").classList.remove("hidden"),"lose")}},{key:"start",value:function(){this.createNewCell(),this.createNewCell(),this.renderHTML(),document.querySelector(".message-start").classList.add("hidden")}},{key:"restart",value:function(){document.querySelector(".message-win").classList.add("hidden"),document.querySelector(".message-lose").classList.add("hidden"),this.currentState=this.initialState.map(function(e){return r(e)}),this.score=0,this.getScore(),this.createNewCell(),this.createNewCell(),this.renderHTML()}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}())([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]),o=document.querySelector("button");o.addEventListener("click",function(){o.classList.contains("start")?(n.start(),o.classList.remove("start"),o.classList.add("restart"),o.textContent="Restart"):n.restart()}),document.addEventListener("keydown",function(e){switch(e.key){case"ArrowLeft":n.moveLeft();break;case"ArrowRight":n.moveRight();break;case"ArrowDown":n.moveDown();break;case"ArrowUp":n.moveUp()}})}();
//# sourceMappingURL=index.28e086ab.js.map
